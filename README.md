# Procrastin8

Procrastin8 - это микросервис для планирования досуга с полным CRUD-функционалом для работы с задачами.

## Функционал

### 1) Создание новой задачи
**POST** `/api/todo-list/tasks`

#### Тело запроса:
```json
{
  "title": "Купить книгу",
  "activeAt": "2023-08-04"
}
```

#### Требования:
- Все поля обязательны.
- Заголовок не должен превышать 200 символов.
- Дата должна быть валидной.
- Проверка уникальности по `title` и `activeAt`.

#### Ответ:
- **201** + `id` задачи — если задача успешно создана.
- **404** — если задача уже существует.

---

### 2) Обновление задачи
**PUT** `/api/todo-list/tasks/{ID}`

#### Тело запроса:
```json
{
  "title": "Купить книгу - Высоконагруженные приложения",
  "activeAt": "2023-08-05"
}
```

#### Требования:
- `{ID}` обязателен.
- Все поля обязательны.
- Заголовок ≤ 200 символов.
- Дата должна быть валидной.

#### Ответ:
- **204** — если задача обновлена успешно.
- **404** — если задача не найдена.

---

### 3) Удаление задачи
**DELETE** `/api/todo-list/tasks/{ID}`

#### Требования:
- `{ID}` обязателен.

#### Ответ:
- **204** — если задача успешно удалена.
- **404** — если задача не найдена.

---

### 4) Пометка задачи выполненной
**PUT** `/api/todo-list/tasks/{ID}/done`

#### Требования:
- `{ID}` обязателен.
- Статус задачи изменяется на "выполнено".

#### Ответ:
- **204** — если задача успешно обновлена.
- **404** — если задача не найдена.

---

### 5) Получение списка задач по статусу
**GET** `/api/todo-list/tasks?status=active|done`

#### Правила:
- `status` необязателен, по умолчанию `active`.
- Если `status=active`, возвращаются все задачи, у которых `activeAt` ≤ текущего дня.
- Задачи сортируются по дате создания.
- Если день выходной (суббота/воскресенье), к заголовку добавляется префикс: `ВЫХОДНОЙ- {заголовок}`.

#### Ответ:
```json
[
  {
    "id": "65f19340848f4be025160391",
    "title": "Купить книгу - Высоконагруженные приложения",
    "activeAt": "2023-08-05"
  },
  {
    "id": "75f19340848f4be025160392",
    "title": "Купить квартиру :)",
    "activeAt": "2023-08-05"
  }
]
```

---

## Запуск через Docker

Сборка контейнера:
```sh
docker build -t my-go-app .
```

Запуск контейнера:
```sh
docker run -it -p 8080:8080 my-go-app
```

---

## Вопросы и ответы

### Кто выполняет валидацию данных: хендлер или сервис?
- Хендлер получает запрос, но валидацию выполняет сервис, чтобы логику можно было переиспользовать в разных местах.

### Как работать с JSON-структурами и их обработкой?
- Использовать `encoding/json` в Go:
  ```go
  import "encoding/json"
  
  type Task struct {
      Title    string `json:"title"`
      ActiveAt string `json:"activeAt"`
  }
  
  var task Task
  err := json.NewDecoder(r.Body).Decode(&task)
  ```

